{% extends request.htmx|yesno:"base_htmx.html,base.html" %}

{% block contenido %}
    <input type="number" id="txt_micliente_correo" value='{{micliente}}' class='d-none'>
    <div class="container col-12">
        <div class="table-actions col-12 d-flex">
            <h1 class='col-10'>Listado de correos</h1>
            <div class='col-2'>
                <button class='btn btn-success' onclick='ImprimirCorreos()'><i class="bi bi-printer"></i> Imprimir</button>
            </div>
        </div>
        <div  scope='col' class="table-responsive" class='col-12' id='div_activos'>                
            <table class="table table-striped table-hover col-12">
                <thead class="table-dark">
                    <tr>
                        <th scope="col">
                            Origen
                            <div class="dropdown" style='margin-left: 5px'>
                              <button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" style="padding: 0px; padding-left: 2px;">
                              </button>
                              <ul class="dropdown-menu">
                                <li><a class="dropdown-item" href="#" hx-get="/oferta/listar/" hx-trigger="click" hx-target="#main-content"> Todos</a></li>
                                {% for correo_responsable in correo_responsables %}
                                    <a class="dropdown-item" href="#" hx-get="/oferta/listar/?cliente={{cliente.pk}}" hx-trigger="click" hx-target="#main-content">{{correo_responsable}}</a></li>
                                {% endfor %}
                              </ul>
                        </th>
                        <th scope="col">Destino </th>
                        <th scope="col">TÃ­tulo</th>
                        <th scope="col"></th>
                    </tr>
                </thead>
                <tbody>
                    {% for correo in correos %}
                        <tr name='tr_resultado'>
                            <td>{{ correo.from_email }}</td>
                            <td>{{ correo.to_email }}</td>
                            <td>{{ correo.subject }}</td>
                            <!--<td>
                                <button type="button" class="btn" data-bs-toggle="modal" data-bs-target="#activoModal" style="margin: 0px; padding:0px;">
                                    <a href="#" hx-get="/activo/{{oferta.activo.id}}/" hx-target="#body_activoModal" style="text-decoration: none;">
                                        ðŸ”Ž
                                    </a>
                                </button>
                            </td> -->
                            <td>
                                <button type="button" class="btn" data-bs-toggle="modal" data-bs-target="#correoModal" style="margin: 0px; padding:0px;">
                                    <a href="#" hx-get="{% url 'detallecorreo' correo.id %}" hx-target="#body_correoModal" style="text-decoration: none;">
                                        ðŸ”Ž
                                    </a>
                                </button>
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    

<!-- Modal -->
    <!--<div class="modal fade" id="correoModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Detalle del correo</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" id='body_correoModal'>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                </div>
            </div>
        </div>
    </div>-->
    <!-- Modal -->
    <div class="modal fade" id="correoModal" tabindex="-1" aria-labelledby="correoModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg"> 
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="correoModalLabel">Detalle del correo</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" id="body_correoModal">
                    
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                </div>
            </div>
        </div>
    </div>


    <script>

    </script>
{% endblock %}

